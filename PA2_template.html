<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>WEATHER SYSTEMS AND THEIR IMPACT ACROSS THE U.S.</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h2>WEATHER SYSTEMS AND THEIR IMPACT ACROSS THE U.S.</h2>

<hr/>

<h2>Section I: Synopsis</h2>

<p>Synopsis: Immediately after the title, there should be a synopsis which describes and summarizes your analysis in at most 10 complete sentences.</p>

<h2>Section II: Data Processing</h2>

<p>There should be a section titled Data Processing which describes (in words and code) how the data were loaded into R and processed for analysis. In particular, your analysis must start from the raw CSV file containing the data. You cannot do any preprocessing outside the document. If preprocessing is time-consuming you may consider using the cache = TRUE option for certain code chunks.</p>

<p>The basic goal of this assignment is to explore the NOAA Storm Database and answer some 
basic questions about severe weather events. You must use the database to answer the 
questions below and show the code for your entire analysis. Your analysis can consist of 
tables, figures, or other summaries. You may use any R package you want to support your analysis.</p>

<h3>Libraries</h3>

<p>4 libraries were added for this assignment, which are the <strong>ggplot2</strong> graphics library, the <strong>grid</strong> library, the <strong>gridExtra</strong> library, and the <strong>xtable</strong> library:</p>

<pre><code class="r">library(ggplot2)
library(grid)
library(gridExtra)
library(xtable)
</code></pre>

<p>All plots created in this assignment are <strong>ggplot2</strong> plots, consisting of histograms and time series plots.  The <strong>gridExtra</strong> library package allows for grid arrangement of multiple plots created with <strong>ggplot2</strong>, and <strong>grid</strong> is required for <strong>gridExtra</strong>. <strong>xtable</strong> is used to convert tables into HTML format.</p>

<h3>Downloading and Reading the Data</h3>

<p>The following code details the directory creation, download of the raw data set, and reading in that raw data set. The directory structure, that this analysis was run, was separated to store some data into a directory off of the working directory for local reasons (i.e. separating assignments, projects, etc). The <code>dataDir</code> was created to add some flexibility here, for local changes or to accomodate other systems that are organized differently.</p>

<pre><code class="r">## ----------------------
## downloading code chunk
## ----------------------
## set the data directory for the analysis. As a single point of reference, 
## changes can be made here if required.
dataDir &lt;- &quot;./data/temp/repdata2/&quot;

## set the name of the file to be used after download. As a single point of reference, 
## changes can be made here if required.
filename &lt;- &quot;StormData.csv&quot;

## Preparing the directory locations:
## check if destination directories to be used already exist, relative to
## the working directory

if(!file.exists(&quot;data&quot;)) {dir.create(&quot;data&quot;)}
if(!file.exists(dataDir)) {dir.create(dataDir)}

## Check to see if the file already exists locally
if(!file.exists(paste(dataDir, filename, sep=&quot;&quot;))) {

    ## file does not exist locally:
    ## note that BZ2 files are text files that R recognizes, so there is no need 
    ## for extraction. Download file renamed to StormData.csv, write to a text file
    ## today&#39;s date of download. If the CSV file does not exist, but the downloaded.txt 
    ## file already exists, the text file will be over written with a new file.

    fileUrl &lt;- &quot;https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2&quot;
    download.file(fileUrl, destfile=paste(dataDir, filename, sep=&quot;&quot;))
    writeLines(date(),paste(dataDir, &quot;datedownloaded.txt&quot;, sep =&quot;&quot;))
    datedownloaded &lt;- paste(readLines(paste(dataDir, &quot;datedownloaded.txt&quot;, sep =&quot;&quot;)),
                            &quot;, downloaded today&quot;, sep=&quot;&quot;)

} else {

    ## file exists locally:
    ## Save variable as local copy if file already exists.

    datedownloaded &lt;- paste(readLines(paste(dataDir, &quot;datedownloaded.txt&quot;, sep =&quot;&quot;)),
                            &quot;, localCopy&quot;, sep=&quot;&quot;)
}
</code></pre>

<p>Now that we have downloaded the raw data set, we can store it into a data frame named <code>weatherData</code>:</p>

<pre><code class="r">## ------------------
## reading code chunk
## ------------------
weatherData &lt;- read.csv(filename, sep=&quot;,&quot;)
</code></pre>

<p>Using inline R code, the following HTML table just states and records <code>filename</code> and <code>datedownloaded</code> from the downloading code chunk above:</p>

<table><thead>
<tr>
<th align="right"></th>
<th align="right">File Used</th>
<th align="right">Downloaded</th>
</tr>
</thead><tbody>
<tr>
<td align="right"><strong>Record</strong></td>
<td align="right">StormData.csv</td>
<td align="right">Wed Aug 20 14:19:13 2014, localCopy</td>
</tr>
</tbody></table>

<p>Recording this information will help in determining accuracy of the analysis if the data source should change in the future. If there is an updated data set at the source site, then the date of the new data set can be compared against <code>datedownloaded</code> of this analysis.  Adjustments can then be made to the analysis code to reflect the change, or margins of error can be calculated based on the differences.</p>

<p>Next we will use the <code>weatherData</code> data set and run some analysis against it. First, let&#39;s check the summary of the data set:</p>

<pre><code class="r">summary(weatherData)
</code></pre>

<pre><code>##     STATE__                  BGN_DATE             BGN_TIME     
##  Min.   : 1.0   5/25/2011 0:00:00:  1202   12:00:00 AM: 10163  
##  1st Qu.:19.0   4/27/2011 0:00:00:  1193   06:00:00 PM:  7350  
##  Median :30.0   6/9/2011 0:00:00 :  1030   04:00:00 PM:  7261  
##  Mean   :31.2   5/30/2004 0:00:00:  1016   05:00:00 PM:  6891  
##  3rd Qu.:45.0   4/4/2011 0:00:00 :  1009   12:00:00 PM:  6703  
##  Max.   :95.0   4/2/2006 0:00:00 :   981   03:00:00 PM:  6700  
##                 (Other)          :895866   (Other)    :857229  
##    TIME_ZONE          COUNTY         COUNTYNAME         STATE       
##  CST    :547493   Min.   :  0   JEFFERSON :  7840   TX     : 83728  
##  EST    :245558   1st Qu.: 31   WASHINGTON:  7603   KS     : 53440  
##  MST    : 68390   Median : 75   JACKSON   :  6660   OK     : 46802  
##  PST    : 28302   Mean   :101   FRANKLIN  :  6256   MO     : 35648  
##  AST    :  6360   3rd Qu.:131   LINCOLN   :  5937   IA     : 31069  
##  HST    :  2563   Max.   :873   MADISON   :  5632   NE     : 30271  
##  (Other):  3631                 (Other)   :862369   (Other):621339  
##                EVTYPE         BGN_RANGE       BGN_AZI      
##  HAIL             :288661   Min.   :   0          :547332  
##  TSTM WIND        :219940   1st Qu.:   0   N      : 86752  
##  THUNDERSTORM WIND: 82563   Median :   0   W      : 38446  
##  TORNADO          : 60652   Mean   :   1   S      : 37558  
##  FLASH FLOOD      : 54277   3rd Qu.:   1   E      : 33178  
##  FLOOD            : 25326   Max.   :3749   NW     : 24041  
##  (Other)          :170878                  (Other):134990  
##          BGN_LOCATI                  END_DATE             END_TIME     
##               :287743                    :243411              :238978  
##  COUNTYWIDE   : 19680   4/27/2011 0:00:00:  1214   06:00:00 PM:  9802  
##  Countywide   :   993   5/25/2011 0:00:00:  1196   05:00:00 PM:  8314  
##  SPRINGFIELD  :   843   6/9/2011 0:00:00 :  1021   04:00:00 PM:  8104  
##  SOUTH PORTION:   810   4/4/2011 0:00:00 :  1007   12:00:00 PM:  7483  
##  NORTH PORTION:   784   5/30/2004 0:00:00:   998   11:59:00 PM:  7184  
##  (Other)      :591444   (Other)          :653450   (Other)    :622432  
##    COUNTY_END COUNTYENDN       END_RANGE      END_AZI      
##  Min.   :0    Mode:logical   Min.   :  0          :724837  
##  1st Qu.:0    NA&#39;s:902297    1st Qu.:  0   N      : 28082  
##  Median :0                   Median :  0   S      : 22510  
##  Mean   :0                   Mean   :  1   W      : 20119  
##  3rd Qu.:0                   3rd Qu.:  0   E      : 20047  
##  Max.   :0                   Max.   :925   NE     : 14606  
##                                            (Other): 72096  
##            END_LOCATI         LENGTH           WIDTH            F         
##                 :499225   Min.   :   0.0   Min.   :   0   Min.   :0       
##  COUNTYWIDE     : 19731   1st Qu.:   0.0   1st Qu.:   0   1st Qu.:0       
##  SOUTH PORTION  :   833   Median :   0.0   Median :   0   Median :1       
##  NORTH PORTION  :   780   Mean   :   0.2   Mean   :   8   Mean   :1       
##  CENTRAL PORTION:   617   3rd Qu.:   0.0   3rd Qu.:   0   3rd Qu.:1       
##  SPRINGFIELD    :   575   Max.   :2315.0   Max.   :4400   Max.   :5       
##  (Other)        :380536                                   NA&#39;s   :843563  
##       MAG          FATALITIES     INJURIES         PROPDMG    
##  Min.   :    0   Min.   :  0   Min.   :   0.0   Min.   :   0  
##  1st Qu.:    0   1st Qu.:  0   1st Qu.:   0.0   1st Qu.:   0  
##  Median :   50   Median :  0   Median :   0.0   Median :   0  
##  Mean   :   47   Mean   :  0   Mean   :   0.2   Mean   :  12  
##  3rd Qu.:   75   3rd Qu.:  0   3rd Qu.:   0.0   3rd Qu.:   0  
##  Max.   :22000   Max.   :583   Max.   :1700.0   Max.   :5000  
##                                                               
##    PROPDMGEXP        CROPDMG        CROPDMGEXP          WFO        
##         :465934   Min.   :  0.0          :618413          :142069  
##  K      :424665   1st Qu.:  0.0   K      :281832   OUN    : 17393  
##  M      : 11330   Median :  0.0   M      :  1994   JAN    : 13889  
##  0      :   216   Mean   :  1.5   k      :    21   LWX    : 13174  
##  B      :    40   3rd Qu.:  0.0   0      :    19   PHI    : 12551  
##  5      :    28   Max.   :990.0   B      :     9   TSA    : 12483  
##  (Other):    84                   (Other):     9   (Other):690738  
##                                STATEOFFIC    
##                                     :248769  
##  TEXAS, North                       : 12193  
##  ARKANSAS, Central and North Central: 11738  
##  IOWA, Central                      : 11345  
##  KANSAS, Southwest                  : 11212  
##  GEORGIA, North and Central         : 11120  
##  (Other)                            :595920  
##                                                                                                                                                                                                     ZONENAMES     
##                                                                                                                                                                                                          :594029  
##                                                                                                                                                                                                          :205988  
##  GREATER RENO / CARSON CITY / M - GREATER RENO / CARSON CITY / M                                                                                                                                         :   639  
##  GREATER LAKE TAHOE AREA - GREATER LAKE TAHOE AREA                                                                                                                                                       :   592  
##  JEFFERSON - JEFFERSON                                                                                                                                                                                   :   303  
##  MADISON - MADISON                                                                                                                                                                                       :   302  
##  (Other)                                                                                                                                                                                                 :100444  
##     LATITUDE      LONGITUDE        LATITUDE_E     LONGITUDE_    
##  Min.   :   0   Min.   :-14451   Min.   :   0   Min.   :-14455  
##  1st Qu.:2802   1st Qu.:  7247   1st Qu.:   0   1st Qu.:     0  
##  Median :3540   Median :  8707   Median :   0   Median :     0  
##  Mean   :2875   Mean   :  6940   Mean   :1452   Mean   :  3509  
##  3rd Qu.:4019   3rd Qu.:  9605   3rd Qu.:3549   3rd Qu.:  8735  
##  Max.   :9706   Max.   : 17124   Max.   :9706   Max.   :106220  
##  NA&#39;s   :47                      NA&#39;s   :40                     
##                                            REMARKS           REFNUM      
##                                                :287433   Min.   :     1  
##                                                : 24013   1st Qu.:225575  
##  Trees down.\n                                 :  1110   Median :451149  
##  Several trees were blown down.\n              :   568   Mean   :451149  
##  Trees were downed.\n                          :   446   3rd Qu.:676723  
##  Large trees and power lines were blown down.\n:   432   Max.   :902297  
##  (Other)                                       :588295
</code></pre>

<p>We can take the variables from the above summary of the data set and cross reference the information about the data in the National Weather Service PDF file <a href="https://d396qusza40orc.cloudfront.net/repdata%2Fpeer2_doc%2Fpd01016005curr.pdf">here</a>. Take a moment to peruse the PDF file to understand the variables listed in the raw data set.</p>

<p>Now that we understand the meaning behind the variables in the data set, we will move forward to answer some questions.</p>

<h3>Answering the Questions</h3>

<h4>Q1. Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health?</h4>

<p>For this analysis, we will define &ldquo;harm&rdquo; as a combination of both &ldquo;fatalities&rdquo; and &ldquo;injuries&rdquo; from the data set. Therefore, we will subset from <code>weatherData</code> only the variables that apply to this question.  From the summary of <code>weatherData</code> that we saw previously, the relevant variables that we have chosen are:</p>

<ul>
<li>EVTYPE</li>
<li>FATALITIES</li>
<li>INJURIES</li>
</ul>

<p>We saw from the summary of <code>weatherData</code> that the above listed variables do not have NA&#39;s in their observations, so we can now subset <code>weatherData</code> with the variables listed above, aggregate the event types and calculate the sum of the total harm done by each type, and then order the event type by the most damage done:</p>

<pre><code class="r">## subset the event types and the harm they do, as popHarm
popHarm &lt;- weatherData[, c(&quot;EVTYPE&quot;, &quot;FATALITIES&quot;, &quot;INJURIES&quot;)]

## calculate the sum of both fatalities and injuries for each event observation, as sunHarm
sumHarm &lt;- popHarm$FATALITIES + popHarm$INJURIES
sumHarm &lt;- cbind(popHarm, sumHarm)

## aggregate population harm by sum into a new data set, aggregateHarm
aggregateHarm &lt;- aggregate(. ~ EVTYPE, data = sumHarm, FUN = sum)

# Order the data set by the most damaging event type into a new data set, harmOrdered
harmOrdered &lt;- aggregateHarm[order(-aggregateHarm$sumHarm),]
head(harmOrdered)
</code></pre>

<pre><code>##             EVTYPE FATALITIES INJURIES sumHarm
## 834        TORNADO       5633    91346   96979
## 130 EXCESSIVE HEAT       1903     6525    8428
## 856      TSTM WIND        504     6957    7461
## 170          FLOOD        470     6789    7259
## 464      LIGHTNING        816     5230    6046
## 275           HEAT        937     2100    3037
</code></pre>

<p>We can see that the most damaging event type is TORNADO, which we will plot in the Results section later using the tidy data set <code>harmOrdered</code>.</p>

<h4>Q2. Across the United States, which types of events have the greatest economic consequences?</h4>

<p>For this analysis, we will define &ldquo;economic consequences&rdquo; as a measurement of damages to property and crops in monetary value of U.S. dollars. According to page 12, section 2.7 of the National Weather Service PDF <a href="https://d396qusza40orc.cloudfront.net/repdata%2Fpeer2_doc%2Fpd01016005curr.pdf">file</a>, monetary values are estimates rounded to three significant digits, followed by an alphabetical character signifying the numerical magnitude. The three alphabetical characters and their designation are as follows:</p>

<ul>
<li><strong>K</strong> - for thousands</li>
<li><strong>M</strong> - for millions</li>
<li><strong>B</strong> - for billions</li>
</ul>

<p>This will be represented in R code as:</p>

<pre><code class="r">## The three alphabetical characters and their designation
k &lt;- 1e3
m &lt;- 1e6
b &lt;- 1e9
</code></pre>

<p>All other designations will be ignored, since they cover other scenarios of ambiguity or exclusion.</p>

<p>From the raw data set <code>weatherData</code>, the numerical estimates are stored in the following variables:</p>

<ul>
<li>PROPDMG</li>
<li>CROPDMG</li>
</ul>

<p>And as follows, the alphabetical characters are stored in the following variables variables (corresponding to <code>PROPDMG</code> and <code>CROPDMG</code>):</p>

<ul>
<li>PROPDMGEXP</li>
<li>CROPDMGEXP</li>
</ul>

<p>When each respective variables are paired, the combination represents the monetary value in USD. Example, using inline R code:</p>

<table><thead>
<tr>
<th align="right">PROPDMG</th>
<th align="right">PROPDMGEXP</th>
<th align="right">CROPDMG</th>
<th align="right">CROPDMGEXP</th>
<th align="right">VALUE IN USD</th>
</tr>
</thead><tbody>
<tr>
<td align="right">1.55</td>
<td align="right">m</td>
<td align="right"></td>
<td align="right"></td>
<td align="right">1550000</td>
</tr>
<tr>
<td align="right"></td>
<td align="right"></td>
<td align="right">1.36</td>
<td align="right">K</td>
<td align="right">1360</td>
</tr>
</tbody></table>

<p>We will use the above model to calculate full monetary values for property damage and crop damage, in new variables respectively, and <code>cbind()</code> them to a new data set, named <code>kmb</code>.</p>

<p>It is important to note that we will need to consider case sensitivity for <code>PROPDMGEXP</code> and <code>CROPDMGEXP</code> since both upper and lower cases have been recorded:</p>

<pre><code class="r">## list the alphabetical characters used for property damage
unique(weatherData$PROPDMGEXP)
</code></pre>

<pre><code>##  [1] K M   B m + 0 5 6 ? 4 2 3 h 7 H - 1 8
## Levels:  - ? + 0 1 2 3 4 5 6 7 8 B h H K m M
</code></pre>

<pre><code class="r">## list the alphabetical characters used for crop damage
unique(weatherData$CROPDMGEXP)
</code></pre>

<pre><code>## [1]   M K m B ? 0 k 2
## Levels:  ? 0 2 B k K m M
</code></pre>

<p>The 4 <code>weatherData</code> variables and the variable <code>EVTYPE</code> will be the relevant variables to subset from the raw data set <code>weatherData</code>. Reviewing the summary of <code>weatherDatda</code> shows that the variables mentioned do not have NA values in the observations. a new data set <code>kmb</code> will be created, then aggregated by event type, and the sum total economic consequences for each event type will be calculated after the <code>cbind()</code> process. </p>

<pre><code class="r">## sprintf(&quot;$%14.2f&quot;,b)

## subset weatherData for the relevant variables relevant to economic consequences
ecoDmg &lt;- weatherData[, c(&quot;EVTYPE&quot;, &quot;PROPDMG&quot;, &quot;PROPDMGEXP&quot;, &quot;CROPDMG&quot;, &quot;CROPDMGEXP&quot;)]

## convert from factor to character
ecoDmg$PROPDMGEXP &lt;- as.character(ecoDmg$PROPDMGEXP)
ecoDmg$CROPDMGEXP &lt;- as.character(ecoDmg$CROPDMGEXP)

## divide into 2 data sets, one for property (ecoDmg.prop), and one for crops (ecoDmg.crop)
ecoDmg.prop &lt;- ecoDmg[, c(&quot;EVTYPE&quot;,&quot;PROPDMG&quot;,&quot;PROPDMGEXP&quot;)]
ecoDmg.crop &lt;- ecoDmg[, c(&quot;EVTYPE&quot;,&quot;CROPDMG&quot;,&quot;CROPDMGEXP&quot;)]

## testing
head(ecoDmg.prop)
</code></pre>

<pre><code>##    EVTYPE PROPDMG PROPDMGEXP
## 1 TORNADO    25.0          K
## 2 TORNADO     2.5          K
## 3 TORNADO    25.0          K
## 4 TORNADO     2.5          K
## 5 TORNADO     2.5          K
## 6 TORNADO     2.5          K
</code></pre>

<pre><code class="r">head(ecoDmg.crop)
</code></pre>

<pre><code>##    EVTYPE CROPDMG CROPDMGEXP
## 1 TORNADO       0           
## 2 TORNADO       0           
## 3 TORNADO       0           
## 4 TORNADO       0           
## 5 TORNADO       0           
## 6 TORNADO       0
</code></pre>

<pre><code class="r">kmb.crop &lt;- ecoDmg.crop[grep(&quot;[kK]|[mM]|[bB]&quot;, ecoDmg.crop$CROPDMGEXP), ]
kmb.prop &lt;- ecoDmg.prop[grep(&quot;[kK]|[mM]|[bB]&quot;, ecoDmg.prop$PROPDMGEXP), ]

unique(kmb.crop$CROPDMGEXP)
</code></pre>

<pre><code>## [1] &quot;M&quot; &quot;K&quot; &quot;m&quot; &quot;B&quot; &quot;k&quot;
</code></pre>

<pre><code class="r">unique(kmb.prop$PROPDMGEXP)
</code></pre>

<pre><code>## [1] &quot;K&quot; &quot;M&quot; &quot;B&quot; &quot;m&quot;
</code></pre>

<pre><code class="r">head(kmb.crop)
</code></pre>

<pre><code>##                           EVTYPE CROPDMG CROPDMGEXP
## 187566 HURRICANE OPAL/HIGH WINDS      10          M
## 187571        THUNDERSTORM WINDS     500          K
## 187581            HURRICANE ERIN       1          M
## 187583            HURRICANE OPAL       4          M
## 187584            HURRICANE OPAL      10          m
## 187653        THUNDERSTORM WINDS      50          K
</code></pre>

<pre><code class="r">head(kmb.prop)
</code></pre>

<pre><code>##    EVTYPE PROPDMG PROPDMGEXP
## 1 TORNADO    25.0          K
## 2 TORNADO     2.5          K
## 3 TORNADO    25.0          K
## 4 TORNADO     2.5          K
## 5 TORNADO     2.5          K
## 6 TORNADO     2.5          K
</code></pre>

<pre><code class="r">## find and replace &#39;k&#39;, &#39;m&#39;, and &#39;b&#39; with equivalent value for property damage
kmb.prop$PROPDMGEXP &lt;- sapply(kmb.prop$PROPDMGEXP, function(i) ifelse(i==&quot;k&quot; | i==&quot;K&quot;, k, i))
kmb.prop$PROPDMGEXP &lt;- sapply(kmb.prop$PROPDMGEXP, function(i) ifelse(i==&quot;m&quot; | i==&quot;M&quot;, m, i))
kmb.prop$PROPDMGEXP &lt;- sapply(kmb.prop$PROPDMGEXP, function(i) ifelse(i==&quot;b&quot; | i==&quot;B&quot;, b, i))

## testing
## unique(kmb.prop$PROPDMGEXP)
## head(kmb.prop)
## str(kmb.prop)

## find and replace &#39;k&#39;, &#39;m&#39;, and &#39;b&#39; with equivalent value for crop damage
kmb.crop$CROPDMGEXP &lt;- sapply(kmb.crop$CROPDMGEXP, function(i) ifelse(i==&quot;k&quot; | i==&quot;K&quot;, k, i))
kmb.crop$CROPDMGEXP &lt;- sapply(kmb.crop$CROPDMGEXP, function(i) ifelse(i==&quot;m&quot; | i==&quot;M&quot;, m, i))
kmb.crop$CROPDMGEXP &lt;- sapply(kmb.crop$CROPDMGEXP, function(i) ifelse(i==&quot;b&quot; | i==&quot;B&quot;, b, i))

## testing
## unique(kmb.crop$CROPDMGEXP)
## head(kmb.crop)
## str(kmb.crop)
</code></pre>

<pre><code class="r">## Convert to numeric
kmb.prop$PROPDMGEXP &lt;- as.numeric(kmb.prop$PROPDMGEXP)
kmb.crop$CROPDMGEXP &lt;- as.numeric(kmb.crop$CROPDMGEXP)
</code></pre>

<pre><code class="r">## Multiply and cbind
kmb.prop &lt;- cbind(kmb.prop, propVal = kmb.prop$PROPDMG * kmb.prop$PROPDMGEXP)
kmb.crop &lt;- cbind(kmb.crop, cropVal = kmb.crop$CROPDMG * kmb.crop$CROPDMGEXP)

## testing, are there NA, other unwanted values
summary(kmb.prop)
</code></pre>

<pre><code>##                EVTYPE         PROPDMG       PROPDMGEXP      
##  HAIL             :91966   Min.   :   0   Min.   :1.00e+03  
##  THUNDERSTORM WIND:81941   1st Qu.:   0   1st Qu.:1.00e+03  
##  TSTM WIND        :62844   Median :   1   Median :1.00e+03  
##  TORNADO          :51827   Mean   :  25   Mean   :1.19e+05  
##  FLASH FLOOD      :32942   3rd Qu.:  10   3rd Qu.:1.00e+03  
##  FLOOD            :17394   Max.   :5000   Max.   :1.00e+09  
##  (Other)          :97128                                    
##     propVal        
##  Min.   :0.00e+00  
##  1st Qu.:0.00e+00  
##  Median :1.00e+03  
##  Mean   :9.80e+05  
##  3rd Qu.:1.00e+04  
##  Max.   :1.15e+11  
## 
</code></pre>

<pre><code class="r">summary(kmb.crop)
</code></pre>

<pre><code>##                EVTYPE         CROPDMG        CROPDMGEXP      
##  HAIL             :82305   Min.   :  0.0   Min.   :1.00e+03  
##  THUNDERSTORM WIND:81425   1st Qu.:  0.0   1st Qu.:1.00e+03  
##  FLASH FLOOD      :21679   Median :  0.0   Median :1.00e+03  
##  FLOOD            :13622   Mean   :  4.9   Mean   :3.97e+04  
##  HIGH WIND        :11501   3rd Qu.:  0.0   3rd Qu.:1.00e+03  
##  TORNADO          : 9593   Max.   :990.0   Max.   :1.00e+09  
##  (Other)          :63732                                     
##     cropVal        
##  Min.   :0.00e+00  
##  1st Qu.:0.00e+00  
##  Median :0.00e+00  
##  Mean   :1.73e+05  
##  3rd Qu.:0.00e+00  
##  Max.   :5.00e+09  
## 
</code></pre>

<pre><code class="r">unique(kmb.prop$PROPDMGEXP)
</code></pre>

<pre><code>## [1] 1e+03 1e+06 1e+09
</code></pre>

<pre><code class="r">unique(kmb.crop$CROPDMGEXP)
</code></pre>

<pre><code>## [1] 1e+06 1e+03 1e+09
</code></pre>

<pre><code class="r">head(kmb.prop)
</code></pre>

<pre><code>##    EVTYPE PROPDMG PROPDMGEXP propVal
## 1 TORNADO    25.0       1000   25000
## 2 TORNADO     2.5       1000    2500
## 3 TORNADO    25.0       1000   25000
## 4 TORNADO     2.5       1000    2500
## 5 TORNADO     2.5       1000    2500
## 6 TORNADO     2.5       1000    2500
</code></pre>

<pre><code class="r">head(kmb.crop)
</code></pre>

<pre><code>##                           EVTYPE CROPDMG CROPDMGEXP cropVal
## 187566 HURRICANE OPAL/HIGH WINDS      10      1e+06   1e+07
## 187571        THUNDERSTORM WINDS     500      1e+03   5e+05
## 187581            HURRICANE ERIN       1      1e+06   1e+06
## 187583            HURRICANE OPAL       4      1e+06   4e+06
## 187584            HURRICANE OPAL      10      1e+06   1e+07
## 187653        THUNDERSTORM WINDS      50      1e+03   5e+04
</code></pre>

<pre><code class="r">str(kmb.prop)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    436042 obs. of  4 variables:
##  $ EVTYPE    : Factor w/ 985 levels &quot;   HIGH SURF ADVISORY&quot;,..: 834 834 834 834 834 834 834 834 834 834 ...
##  $ PROPDMG   : num  25 2.5 25 2.5 2.5 2.5 2.5 2.5 25 25 ...
##  $ PROPDMGEXP: num  1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 ...
##  $ propVal   : num  25000 2500 25000 2500 2500 2500 2500 2500 25000 25000 ...
</code></pre>

<pre><code class="r">str(kmb.crop)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    283857 obs. of  4 variables:
##  $ EVTYPE    : Factor w/ 985 levels &quot;   HIGH SURF ADVISORY&quot;,..: 410 786 406 409 409 786 786 834 834 812 ...
##  $ CROPDMG   : num  10 500 1 4 10 50 50 5 50 15 ...
##  $ CROPDMGEXP: num  1e+06 1e+03 1e+06 1e+06 1e+06 1e+03 1e+03 1e+03 1e+03 1e+03 ...
##  $ cropVal   : num  1.0e+07 5.0e+05 1.0e+06 4.0e+06 1.0e+07 5.0e+04 5.0e+04 5.0e+03 5.0e+04 1.5e+04 ...
</code></pre>

<pre><code class="r">## convert from factor to character
kmb.prop$EVTYPE &lt;- as.character(kmb.prop$EVTYPE)
kmb.crop$EVTYPE &lt;- as.character(kmb.crop$EVTYPE)

## subset just the necessary variables, &#39;evtype&#39; and &#39;propVal&#39;
kmb.prop2 &lt;- kmb.prop[,c(&quot;EVTYPE&quot;,&quot;propVal&quot;)]

## subset just the necessary variables, &#39;evtype&#39; and &#39;cropVal&#39;
kmb.crop2 &lt;- kmb.crop[,c(&quot;EVTYPE&quot;,&quot;cropVal&quot;)]

## aggregate as in Q1
aggregateProp &lt;- aggregate(. ~ EVTYPE, data = kmb.prop2, FUN = sum)
aggregateCrop &lt;- aggregate(. ~ EVTYPE, data = kmb.crop2, FUN = sum)

## convert &#39;propVal&#39; and &#39;cropVal&#39; to represent billions in USD
aggregateProp$propVal &lt;- aggregateProp$propVal / 1e9 
aggregateCrop$cropVal &lt;- aggregateCrop$cropVal / 1e9 

## order property data by highest damage value
propTotal &lt;- aggregateProp[order(-aggregateProp$propVal),]

## order crop data by highest damage value
cropTotal &lt;- aggregateCrop[order(-aggregateCrop$cropVal),]

## merge crop and property data
ecoMerged &lt;- merge(propTotal, cropTotal)

## create a new variable that calculates the sum of crop and property damage
## by evtype
ecoTotal &lt;- cbind(ecoMerged, Total = ecoMerged$propVal + ecoMerged$cropVal)

## order total damage value per type by highest damage value
ecoTotal &lt;- ecoTotal[order(-ecoTotal$Total),]
</code></pre>

<pre><code class="r">## take a look at the highest monetary loss in billions USD under each category
xt1 &lt;- xtable(head(propTotal))
xt2 &lt;- xtable(head(cropTotal))
xt3 &lt;- xtable(head(ecoTotal))

print(xt1, include.rownames=F, type=&quot;html&quot;)
</code></pre>

<!-- html table generated in R 3.1.1 by xtable 1.7-3 package -->

<!-- Thu Aug 21 17:46:08 2014 -->

<TABLE border=1>
<TR> <TH> EVTYPE </TH> <TH> propVal </TH>  </TR>
  <TR> <TD> FLOOD </TD> <TD align="right"> 144.66 </TD> </TR>
  <TR> <TD> HURRICANE/TYPHOON </TD> <TD align="right"> 69.31 </TD> </TR>
  <TR> <TD> TORNADO </TD> <TD align="right"> 56.94 </TD> </TR>
  <TR> <TD> STORM SURGE </TD> <TD align="right"> 43.32 </TD> </TR>
  <TR> <TD> FLASH FLOOD </TD> <TD align="right"> 16.14 </TD> </TR>
  <TR> <TD> HAIL </TD> <TD align="right"> 15.73 </TD> </TR>
   </TABLE>

<pre><code class="r">print(xt2, include.rownames=F, type=&quot;html&quot;)
</code></pre>

<!-- html table generated in R 3.1.1 by xtable 1.7-3 package -->

<!-- Thu Aug 21 17:46:08 2014 -->

<TABLE border=1>
<TR> <TH> EVTYPE </TH> <TH> cropVal </TH>  </TR>
  <TR> <TD> DROUGHT </TD> <TD align="right"> 13.97 </TD> </TR>
  <TR> <TD> FLOOD </TD> <TD align="right"> 5.66 </TD> </TR>
  <TR> <TD> RIVER FLOOD </TD> <TD align="right"> 5.03 </TD> </TR>
  <TR> <TD> ICE STORM </TD> <TD align="right"> 5.02 </TD> </TR>
  <TR> <TD> HAIL </TD> <TD align="right"> 3.03 </TD> </TR>
  <TR> <TD> HURRICANE </TD> <TD align="right"> 2.74 </TD> </TR>
   </TABLE>

<pre><code class="r">print(xt3, include.rownames=F, html.table.attributes = getOption(&quot;xtable.html.table.attributes&quot;,
                                    &quot;border=0&quot;), type=&quot;html&quot;)
</code></pre>

<!-- html table generated in R 3.1.1 by xtable 1.7-3 package -->

<!-- Thu Aug 21 17:46:08 2014 -->

<TABLE border=0>
<TR> <TH> EVTYPE </TH> <TH> propVal </TH> <TH> cropVal </TH> <TH> Total </TH>  </TR>
  <TR> <TD> FLOOD </TD> <TD align="right"> 144.66 </TD> <TD align="right"> 5.66 </TD> <TD align="right"> 150.32 </TD> </TR>
  <TR> <TD> HURRICANE/TYPHOON </TD> <TD align="right"> 69.31 </TD> <TD align="right"> 2.61 </TD> <TD align="right"> 71.91 </TD> </TR>
  <TR> <TD> TORNADO </TD> <TD align="right"> 56.94 </TD> <TD align="right"> 0.41 </TD> <TD align="right"> 57.35 </TD> </TR>
  <TR> <TD> STORM SURGE </TD> <TD align="right"> 43.32 </TD> <TD align="right"> 0.00 </TD> <TD align="right"> 43.32 </TD> </TR>
  <TR> <TD> HAIL </TD> <TD align="right"> 15.73 </TD> <TD align="right"> 3.03 </TD> <TD align="right"> 18.76 </TD> </TR>
  <TR> <TD> FLASH FLOOD </TD> <TD align="right"> 16.14 </TD> <TD align="right"> 1.42 </TD> <TD align="right"> 17.56 </TD> </TR>
   </TABLE>

<p>From the new tidy data sets we created, <code>cropTotal</code>, <code>propTotal</code>, and <code>ecoTotal</code>, we can see different losses under each category, sorted by the highest amount lost in billions USD.  We will use this information to create a plot in the next section.</p>

<h2>Section III: Results</h2>

<p>We will now revisit the questions asked in Section II, and plot the results for the answers.</p>

<h4>Q1. Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health?</h4>

<h4>Q2. Across the United States, which types of events have the greatest economic consequences?</h4>

<h3>Conclusion</h3>

<p>Consider writing your report as if it were to be read by a government or municipal manager 
 who might be responsible for preparing for severe weather events and will need to prioritize 
 resources for different types of events. However, there is no need to make any specific 
 recommendations in your report.</p>

<p>## Document Layout</p>

<p>The analysis document must have at least one figure containing a plot.</p>

<p>Your analyis must have no more than three figures. Figures may have multiple plots in them 
 (i.e. panel plots), but there cannot be more than three figures total.</p>

<p>You must show all your code for the work in your analysis document. This may make the document 
 a bit verbose, but that is okay. In general, you should ensure that echo = TRUE for every code 
 chunk (this is the default setting in knitr).</p>

<p>## Publishing Your Analysis</p>

<p>For this assignment you will need to publish your analysis on RPubs.com. If you do not 
 already have an account, then you will have to create a new account. After you have completed 
 writing your analysis in RStudio, you can publish it to RPubs by doing the following:</p>

<p>In RStudio, make sure your R Markdown document (.Rmd) document is loaded in the editor</p>

<p>Click the Knit HTML button in the doc toolbar to preview your document.</p>

<p>In the preview window, click the Publish button.</p>

<p>Once your document is published to RPubs, you should get a unique URL to that document. 
   Make a note of this URL as you will need it to submit your assignment.</p>

<p>NOTE: If you are having trouble connecting with RPubs due to proxy-related or other issues, 
 you can upload your final analysis document file as a PDF to Coursera instead.</p>

<p>Submitting Your Assignment</p>

<p>In order to submit this assignment, you must copy the RPubs URL for your completed data 
 analysis document in to the peer assessment question.</p>

</body>

</html>

